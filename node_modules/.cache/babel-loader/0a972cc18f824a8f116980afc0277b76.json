{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\peppe\\\\Documents\\\\code-stuff\\\\TweetBook\\\\src\\\\components\\\\Avatar.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState } from 'react';\nimport config from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Avatar(props) {\n  _s();\n\n  function changeVis() {\n    if (props.isGuest) return;\n    setAvatarButtonVisible(!avatarButtonVisible);\n  }\n\n  function showFileDialog() {\n    document.getElementById(\"file-upload\").click();\n    console.log('file dialog opened');\n  }\n\n  async function fileSelected() {\n    let file = document.getElementById(\"file-upload\");\n\n    if (file.value != \"\") {\n      props.setFileIsUploading(true);\n      console.log(\"file selected for upload\");\n      let blob = file.files[0];\n      console.log(blob);\n      let data = new FormData();\n      data.append(\"file\", blob);\n      data.append(\"userID\", props.userID);\n      const response = await fetch(config.API() + \"/tweetbookapi/Avatar/upload\", {\n        method: 'POST',\n        body: data\n      }).then(response => response.json()).then(fileLoc => {\n        props.setFileIsUploading(false);\n        console.log(fileLoc.value);\n        props.updateLoggedInUserAvatar(fileLoc.value);\n      });\n    }\n  }\n\n  const [avatarButtonVisible, setAvatarButtonVisible] = useState(false);\n  let fileLocation = `/avatars/${props.fileName}`;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col content-center items-center text-white box-border w-24 items-center justify-top flex-shrink-0 border-2 border-slate-500 shadow-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex relative h-24 w-full text-center items-center justify-center  bg-slate-200\",\n      onMouseEnter: () => changeVis(),\n      onMouseLeave: () => changeVis(),\n      children: [(props.isLoggedIn || props.isGuest) && avatarButtonVisible && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"file\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/res/change-avatar16.png\",\n          alt: \"avatar\",\n          className: \"absolute top-1 right-1 bg-white rounded-md\",\n          onClick: () => showFileDialog()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"file-upload\",\n        hidden: true,\n        accept: \"image/png, image/jpeg\",\n        onChange: () => fileSelected()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          objectFit: \"cover\",\n          overflow: \"hidden\"\n        },\n        alt: \"Avatar\",\n        src: fileLocation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pt-1 inline-block h-8 text-s text-center align-bottom truncate bg-zinc-700 w-full border-t-2 border-slate-500\",\n      children: props.username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Avatar, \"T7979zvjAUcyoq9pQ2y7zwMvOQ8=\");\n\n_c = Avatar;\nexport default Avatar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Avatar\");","map":{"version":3,"sources":["C:/Users/peppe/Documents/code-stuff/TweetBook/src/components/Avatar.js"],"names":["React","useState","config","Avatar","props","changeVis","isGuest","setAvatarButtonVisible","avatarButtonVisible","showFileDialog","document","getElementById","click","console","log","fileSelected","file","value","setFileIsUploading","blob","files","data","FormData","append","userID","response","fetch","API","method","body","then","json","fileLoc","updateLoggedInUserAvatar","fileLocation","fileName","isLoggedIn","width","height","objectFit","overflow","username"],"mappings":"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","sourcesContent":["import {React ,useState} from 'react';\r\nimport config from '../config'\r\n\r\nfunction Avatar(props)\r\n{\r\n    function changeVis(){\r\n        if (props.isGuest) return;\r\n        setAvatarButtonVisible(!avatarButtonVisible);\r\n    }\r\n    function showFileDialog(){\r\n        document.getElementById(\"file-upload\").click();\r\n        console.log('file dialog opened')\r\n    }\r\n    async function  fileSelected(){\r\n        let file = document.getElementById(\"file-upload\")\r\n        if (file.value != \"\"){\r\n\r\n            props.setFileIsUploading(true)\r\n            console.log(\"file selected for upload\")\r\n            let blob = file.files[0];\r\n            console.log(blob)\r\n            let data = new FormData();\r\n            data.append(\"file\",blob);\r\n            data.append(\"userID\",props.userID );\r\n            const response = await fetch(config.API() + \"/tweetbookapi/Avatar/upload\",{\r\n                method : 'POST',\r\n                body: data\r\n            }).then(response => response.json())\r\n              .then(fileLoc =>{\r\n                    props.setFileIsUploading(false);\r\n                    console.log(fileLoc.value);\r\n                    props.updateLoggedInUserAvatar(fileLoc.value);\r\n                });\r\n\r\n        }\r\n    }\r\n    const [avatarButtonVisible, setAvatarButtonVisible] = useState(false);\r\n    let fileLocation = `/avatars/${props.fileName}`\r\n    return (\r\n        <div className=\"flex flex-col content-center items-center text-white box-border w-24 items-center justify-top flex-shrink-0 border-2 border-slate-500 shadow-xl\">\r\n            <div className=\"flex relative h-24 w-full text-center items-center justify-center  bg-slate-200\"\r\n                onMouseEnter={() => changeVis()} onMouseLeave={() => changeVis()}>\r\n\r\n                    {(props.isLoggedIn || props.isGuest) && avatarButtonVisible &&\r\n\r\n                    <button type=\"file\">\r\n                        <img src=\"/res/change-avatar16.png\" alt=\"avatar\"\r\n                            className=\"absolute top-1 right-1 bg-white rounded-md\"\r\n                            onClick={() => showFileDialog()}/>\r\n                    </button>}\r\n                <input type=\"file\" id=\"file-upload\" hidden\r\n                    accept=\"image/png, image/jpeg\"\r\n                    onChange={() => fileSelected()}/>\r\n                <img style={{\r\n                   width:\"100%\",\r\n                    height:\"100%\",\r\n                    objectFit: \"cover\",\r\n                    overflow: \"hidden\"\r\n                }} alt=\"Avatar\" src={fileLocation}/>\r\n            </div>\r\n            <div className=\"pt-1 inline-block h-8 text-s text-center align-bottom truncate bg-zinc-700 w-full border-t-2 border-slate-500\">\r\n                 {props.username}\r\n            </div>\r\n        </div>\r\n   )\r\n}\r\n\r\nexport default Avatar;\r\n\r\n"]},"metadata":{},"sourceType":"module"}